<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car tire rims</title>
    <link href="src/css/bootstrap.min.css" rel="stylesheet">
    <script src="src/js/bootstrap.bundle.min.js"></script>
    <script src="src/js/jquery-3.6.0.min.js"></script>
    <script src="src/js/fabric.min.js"></script>
</head>
<body class="bg-light">
<header class="p-3 bg-dark text-white">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li><h3>Car tire rims</h3></li>
            </ul>

            <div class="text-end">
                <button type="button" class="btn btn-warning">Change your desired car tire rims</button>
            </div>
        </div>
    </div>
</header>
<nav class="navbar navbar-expand-sm navbar-dark bg-dark" aria-label="Third navbar example">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample03"
                aria-controls="navbarsExample03" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExample03">
            <ul class="navbar-nav me-auto mb-2 mb-sm-0">
                <li class="nav-item dropdown p-3">
                    <a class="nav-link active dropdown-toggle h5" href="#" id="dropdown01" data-bs-toggle="dropdown"
                       aria-expanded="false">Car</a>
                    <ul id="cars" class="dropdown-menu" aria-labelledby="dropdown03">
                        <li><a class="dropdown-item">Benz-truck</a></li>
                        <li><a class="dropdown-item">Benz-w124</a></li>
                        <li><a class="dropdown-item">BMW-e34</a></li>
                        <li><a class="dropdown-item">BMW-e46</a></li>
                        <li><a class="dropdown-item">Peugeot-206</a></li>
                        <li><a class="dropdown-item">Peugeot-405</a></li>
                        <li><a class="dropdown-item">Pickup</a></li>
                        <li><a class="dropdown-item">Pride</a></li>
                        <li><a class="dropdown-item">Renault</a></li>
                        <li><a class="dropdown-item">Scania-truck</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown p-3">
                    <a class="nav-link active dropdown-toggle h5" href="#" id="dropdown01" data-bs-toggle="dropdown"
                       aria-expanded="false">Ring</a>
                    <ul id="rings" class="dropdown-menu" aria-labelledby="dropdown03">
                        <li><a class="dropdown-item">ring1</a></li>
                        <li><a class="dropdown-item">ring2</a></li>
                        <li><a class="dropdown-item">ring3</a></li>
                        <li><a class="dropdown-item">ring4</a></li>
                        <li><a class="dropdown-item">ring5</a></li>
                        <li><a class="dropdown-item">ring6</a></li>
                        <li><a class="dropdown-item">ring7</a></li>
                        <li><a class="dropdown-item">ring8</a></li>
                        <li><a class="dropdown-item">ring9</a></li>
                        <li><a class="dropdown-item">ring10</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>
<br>
<div style="display: inline-block">
    <p style="font-weight: bold">
        &nbsp;
        Car Image Move ->
        <button class="btn btn-primary" onclick="move('top')">↑</button>
        <button class="btn btn-success" onclick="move('right')">→</button>
        <button class="btn btn-secondary" onclick="move('bottom')">↓</button>
        <button class="btn btn-info" onclick="move('left')">←</button>
    </p>
</div>
<div id="board">
    <canvas id="c" style="border:1px solid #ccc;" width="1550" height="400"></canvas>
    <img src="src/images/rims/ring1.png" id="ring1" style="display: none">
    <img src="src/images/rims/ring2.png" id="ring2" style="display: none">
    <img src="src/images/rims/ring3.png" id="ring3" style="display: none">
    <img src="src/images/rims/ring4.png" id="ring4" style="display: none">
    <img src="src/images/rims/ring5.png" id="ring5" style="display: none">
    <img src="src/images/rims/ring6.png" id="ring6" style="display: none">
    <img src="src/images/rims/ring7.png" id="ring7" style="display: none">
    <img src="src/images/rims/ring8.png" id="ring8" style="display: none">
    <img src="src/images/rims/ring9.png" id="ring9" style="display: none">
    <img src="src/images/rims/ring10.png" id="ring10" style="display: none">
</div>
<script>
    $('ul#cars li a').on('click', function (e) {
        document.getElementById('board').style.background = 'url(src/images/cars/' + $(this).html() + '.png) no-repeat 50% 50%';
    })
    $('ul#rings li a').on('click', function (e) {
        Add($(this).html());
        Add($(this).html());
    })
    let canvas = this.__canvas = new fabric.Canvas('c');
    // create a rect object
    let deleteIcon = "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E";

    let img = document.createElement('img');
    img.src = deleteIcon;

    fabric.Object.prototype.transparentCorners = false;
    fabric.Object.prototype.cornerColor = 'blue';
    fabric.Object.prototype.cornerStyle = 'circle';

    function Add(ring) {

        let imgElement = document.getElementById(ring);
        let imgInstance = new fabric.Image(imgElement, {
            left: 100,
            top: 100,
            opacity: 1
        });

        canvas.add(imgInstance);
        canvas.setActiveObject(imgInstance);
    }

    fabric.Object.prototype.controls.deleteControl = new fabric.Control({
        x: 0.5,
        y: -0.5,
        offsetY: 16,
        cursorStyle: 'pointer',
        mouseUpHandler: deleteObject,
        render: renderIcon,
        cornerSize: 24
    });

    function deleteObject(eventData, transform) {
        let target = transform.target;
        let canvas = target.canvas;
        canvas.remove(target);
        canvas.requestRenderAll();
    }

    function renderIcon(ctx, left, top, styleOverride, fabricObject) {
        let size = this.cornerSize;
        ctx.save();
        ctx.translate(left, top);
        ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));
        ctx.drawImage(img, -size / 2, -size / 2, size, size);
        ctx.restore();
    }

    function move(action) {
        let position = document.getElementById('board').style.backgroundPosition;
        position = position.replaceAll('%', '');
        let positionArray = position.split(" ");
        let x = parseInt(positionArray[0])
        let y = parseInt(positionArray[1])
        switch (action) {
            case "top":
                y = y - 10;
                break;
            case "bottom":
                y = y + 10
                break;
            case "right":
                x = x + 10
                break;
            case "left":
                x = x - 10
                break;
            default:
                break;
        }
        document.getElementById('board').style.backgroundPosition = x + "% " + y + "%"
    }
</script>
</body>
</html>